# Lefthook configuration for FinOps for AI
# https://github.com/evilmartians/lefthook

pre-commit:
  parallel: true
  commands:
    lint:
      glob: "**/*.{js,ts,jsx,tsx}"
      run: bun run check:write
      stage_fixed: true

    format-prisma:
      glob: "prisma/schema.prisma"
      run: bunx prisma format
      stage_fixed: true

    validate-colors:
      glob: "**/*.{js,ts,jsx,tsx}"
      run: bun run validate:colors
      fail_text: "âŒ Color system validation failed. See docs/color-system-guidelines.md"

pre-push:
  parallel: false
  commands:
    type-check:
      run: |
        echo "ğŸ” Running type check..."
        bun run build
      fail_text: "âŒ Type check failed. Please fix TypeScript errors before pushing."

    test:
      run: |
        if bun run -h 2>/dev/null | grep -q "test"; then
          echo "ğŸ§ª Running tests..."
          bun test
        else
          echo "â­ï¸  No test script found, skipping tests"
        fi
